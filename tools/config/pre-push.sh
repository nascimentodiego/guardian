#!/bin/sh

THUMBS_UP='\U1F44D'
SKULL='💀'

TXT_GREEN='\e[01;32m'
TXT_RED='\e[01;31m'
TXT_RED2='\e[01;31m;47m'
TXT_BLUE='\033[0;34m'

TXT_ORANGE='\033[0;33m'

BG_WHITE='\033[0;107m'
COLOR_OFF='\033[0m'


echo -e "${TXT_ORANGE}																	   "
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⡀⠀⠀⠀⠀⠀⠀⠀⡠⠌⠀⠀⠀⠀⠀⠀⠀⠀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⡞⣆⠀⠀⠀⠀⠀⠀⠒⡈⠆⠀⠀⠀⠀⠀⠀⣴⣉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡝⣎⠀⠀⠀⠀⠀⢠⠀⠀⠀⠀⠀⠀⢀⡝⢦⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠚⡜⠀⠀⠀⠀⠀⠃⠀⠀⠀⠀⢀⡱⠊⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⢠⠈⡀⠠⠀⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⠀⠀⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠀⡄⠂⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠂⠥⢀⡐⠀⠀⠀⠀⠀⠐⠠⡐⠠⢂⡁⠆⠠⠄⡐⠀⠀⠀⠀⠀⠀⠠⠐⡈⠄⠊⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠁⠀⠀⠄⡐⡉⡔⠐⠁⠐⠐⠈⠅⠒⢠⠁⢢⠀⠀⠐⠈⠉⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡄⢂⢁⠊⠀⠀⠄⡀⢀⠀⠀⠀⠐⠉⡄⢊⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⣀⠶⣘⢧⣛⡴⢢⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⢤⡰⠀⠀⠀⠀⠀⢀⢀⡠⢄⡤⢠⣀⣀⠀⡀⠀⠀⠐⡈⠁⠀⢂⠡⢊⠐⡄⠂⠄⡀⠀⢸⠀⠆⡄⠀⠀⡀⢀⣀⠤⣠⠄⣄⣀⢀"
echo "⢐⣎⠳⣭⠘⠈⡜⢧⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⠳⣎⠵⠀⠀⠀⠀⠀⠀⠈⠁⠋⠘⠑⠈⠀⠁⠀⠀⠀⡅⠸⠀⢘⠠⡁⢂⠎⠉⢌⣂⠅⠀⡀⢊⡐⡀⠀⠀⠈⠁⠈⠓⠁⠙⠂⠁⠈"
echo "⠈⣎⠟⡴⡑⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⢠⣀⡄⠀⢀⠤⣤⠠⠀⠀⠀⠀⠀⠀⠀⣀⡄⣀⡄⡀⠀⠀⢀⠤⣤⣒⢤⢀⠀⠀⣜⠳⣎⠽⣁⢆⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⡈⠄⢸⢀⢂⠡⠑⠀⠀⠀⠀⠠⢠⠁⠔⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠙⣎⡳⡝⡤⠀⠀⠀⠀⡽⣙⠆⠀⢴⣣⠳⣜⠀⢈⡗⣎⢳⡠⢤⡆⣤⢄⢠⡹⢦⡹⠌⠀⠁⠀⢠⡝⡺⢼⠴⣩⢞⠐⠋⡼⣓⢮⡹⠈⠀⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠁⢌⠀⢆⠐⢌⠰⢀⠤⢀⠂⢅⢂⠜⠀⠀⠠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⢪⠵⡹⣜⡂⠀⠀⢘⠶⣩⠆⠀⡳⢬⠳⣭⠀⢠⡛⣬⠳⣍⡣⣟⢦⣃⠈⣗⡣⣝⠂⠀⠀⠀⢴⣩⠳⣭⠚⠃⠀⠀⠀⡷⣩⠶⣹⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢄⠠⡂⠃⠀⠀⠀⠀⠀⠀⠀⠈⠠⢂⣁⠢⣌⠐⠒⠀⠀⠀⠀⠀⠐⢄⠠⠐⠀⡀⠀⠀⠀⠀"
echo "⠀⠀⠀⠩⣳⠬⣝⡒⠀⢸⣙⠆⡆⠸⣍⣳⣋⠶⠂⢨⠳⣥⢛⡔⠀⡝⢦⡹⠀⠨⢳⡜⣣⠀⠀⠀⢎⢧⡛⡴⠆⠀⠀⠀⠀⡞⣥⢛⡴⠆⠀⠀⠀⠀⠀⠀⠠⠀⠂⠅⠂⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠀⠀⠀⠀⠀⠀⠀⠃⠆⢠⠀⡀⠀⠀"
echo "⣲⢒⢦⣀⣯⠲⣍⣳⠀⠸⣙⠶⣃⠴⣫⢽⡏⣖⠆⢸⠲⣍⠾⡁⠀⡵⢎⡳⠀⠀⠪⣕⢫⢦⠀⠀⠸⢬⡓⢧⡄⢀⢀⠀⠀⢱⢭⡚⡵⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡲⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢱⣄⠀⠀⠀⠀⠀⠀⠀⠀⠈⠀⠁⠀"⠀
echo "⠐⠫⢶⡡⢧⣛⡜⡦⠃⠀⠉⠚⠥⠛⠥⠃⢛⣬⣱⠐⢯⡜⢓⠀⠀⠙⠊⠑⠁⠀⠀⢎⡗⣎⠇⡀⠀⠑⠭⠳⠜⡭⠪⠁⠀⠘⡦⢫⢵⡋⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢄⢮⠱⠀⠀⠀⠀⠀⠘⢈⠀⠀⠀⠀⠀⢬⢣⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀"⠀⠀
echo "⠀⠀⠀⠉⠀⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⢠⡝⡼⣘⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠂⠙⠓⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢐⡏⡒⠁⠀⠀⠀⠀⠀⠌⢠⠀⠀⠀⠀⠀⠀⢣⢳⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo -e "${TXT_GREEN}"
echo "⠀⣴⣶⣶⣶⢶⠶⠶⡶⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⢸⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠰⣿⣿⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⢸⣿⣿⣿⣿⣶⣶⡶⠀⠀⣴⣦⡄⠀⠀⠀⣤⡠⠀⠀⠀⢀⣀⣀⠀⠀⠀⠀⠀⠀⠀⢀⣠⣤⣀⡀⠀⢀⣤⣤⣤⠀⠀⠀⠀⠀⠀⣀⣀⡀⠀⠀⠀⣀⣤⣀⣄⠀⠀⣀⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣄⡀⠀⠀⠀⢀⣀⣤⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⢺⣿⣿⣿⣿⠁⠀⠀⠀⠀⠹⣿⣿⣧⣀⣾⣿⡟⠀⠀⠀⣿⣿⣿⣢⣴⣶⣤⡄⠀⣴⣿⣿⠀⣿⣿⠆⠈⣿⣿⣿⣦⣾⣿⠿⠓⢰⣿⣿⣷⠀⣰⣿⣿⠃⢹⣿⡆⠀⣿⣿⣿⡄⢀⣠⣤⣀⠀⠀⢠⣾⣿⡟⠛⠻⠁⠀⣾⣿⣿⠀⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀"⠀⠀
echo "⣹⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠹⣿⣿⣿⣿⡿⠀⠀⠀⢰⣿⣿⣿⣿⢫⣿⣿⣟⢸⣿⣿⣿⡶⠛⠉⠀⠀⣿⣿⣿⣿⣿⠁⠀⠀⢸⣿⣿⣿⠀⣿⣿⣿⣶⠿⠋⠀⠀⣿⣿⣿⣷⡿⣿⣿⣿⡄⢠⣿⣿⣿⠃⠀⠀⠀⢸⣿⣿⣷⡾⠟⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀"⠀⠀
echo "⢸⣿⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠹⣿⣿⣿⡇⠀⠀⠀⢸⣿⣿⣿⡏⣼⣿⣿⠃⢸⣿⣿⣿⡄⠀⠀⠀⠀⣿⣿⣿⣿⠁⠀⠀⠀⢸⣿⣿⣯⠘⣿⣿⣿⡇⠀⠀⠀⢰⣿⣿⣿⣿⠁⣸⣿⣿⡇⢸⣿⣿⣿⠁⠀⠀⠀⢸⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"⠀⠀
echo "⠸⣿⣿⣿⣿⡅⠀⠀⠀⠀⠀⠀⣸⣿⣿⣿⣷⡄⠀⠀⢸⣿⣿⣿⣽⣿⡿⠃⠀⠘⣿⣿⣿⣧⠀⢀⡀⠀⢿⣿⣿⣟⠀⠀⠀⠀⢸⣿⣿⣷⠀⢿⣿⣿⣷⡀⠀⡀⢨⣿⣿⣿⡇⠀⣿⣿⣿⡇⢸⣿⣿⣿⣆⣠⣤⡄⠸⣿⣿⣿⣦⠀⢀⡀⠀⠀⠀⠀⠀⠀⠀"⠀⠀⠀
echo "⠀⠻⣿⣿⣿⣷⣶⣶⠦⠀⠀⠀⣿⡿⠉⠻⣿⣿⣧⠀⣸⣿⣿⣿⠛⠉⠀⠀⠀⠀⠘⠻⣿⣿⣿⠿⠃⠀⠻⠿⠿⠛⠀⠀⠀⠀⠸⣿⣿⣿⠀⠈⠻⢿⣿⣿⡿⠟⠀⣿⣿⣿⠇⠀⠙⠛⠛⠁⠀⠻⣿⣿⣿⣿⠟⠁⠀⠘⠿⢿⣿⣿⠿⠋⠀⠀⠀⠀⠀⠀"⠀⠀⠀⠀
echo "⠀⠀⠈⠉⠉⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢽⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠋⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo "⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⢿⠿⡿⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀"
echo -e "${COLOR_OFF}"


echo "[lint] Checando o Lint Report..."
./gradlew app:lint --daemon

statusLint=$?

echo "[ktlint] Verificando formatação do código..."
./gradlew app:ktlintCheck --daemon

status=$?

echo ""

echo "[DeteKt] Analisando o código..."
./gradlew app:detekt --daemon

statusdeteKt=$?

get_lint_success() {
    echo -e "lint ----------------------------------------- ${TXT_GREEN}[SUCCESS]${COLOR_OFF}" 
}

get_lint_fail() {
    echo -e "lint ----------------------------------------- ${BG_WHITE}${TXT_RED}[FALHOU]${COLOR_OFF}"
}

get_ktlint_success() {
    echo -e "ktlint --------------------------------------- ${TXT_GREEN}[SUCCESS]${COLOR_OFF}" 
}

get_ktlint_fail() {
    echo -e "ktlint --------------------------------------- ${BG_WHITE}${TXT_RED}[FALHOU]${COLOR_OFF}"
    echo -e "Talvez você deva rodar o comando: ktlintFormat ->$TXT_BLUE ./gradlew app:ktlintFormat${COLOR_OFF}" 
}

get_detekt_success() {
    echo -e "DeteKt --------------------------------------- ${TXT_GREEN}[SUCCESS]"
}

get_detekt_fail() {
    echo -e "DeteKt --------------------------------------- ${BG_WHITE}${TXT_RED}[FALHOU]${COLOR_OFF}"
    echo -e "Não se preocupa, dá uma olhadinha no relatório(pasta build): -> $TXT_BLUE detekt.html ${COLOR_OFF}"
}

if [[ "$status" == 0 ]] && [[ "$statusdeteKt" == 0 ]] && [[ "$statusLint" == 0 ]]; then
    echo -e ""    
    echo -e "${TXT_GREEN}✅ ${COLOR_OFF} Nenhum problema foi encontrado."
    echo "$(get_lint_success)"    
    echo "$(get_ktlint_success)"
    echo "$(get_detekt_success)"
    echo -e ""

    exit 0
else
    echo -e ""
    echo -e "${TXT_RED}☠️❌ ${COLOR_OFF} Eita.... Encontramos alguns problemas."
    echo -e "Existes alguns pontos que precisam ser corrigidos !!!"
    echo -e ""
fi

if [ "$statusLint" == 1 ] ; then
    echo "$(get_lint_fail)"
else
   echo "$(get_lint_success)"
fi

if [ "$status" == 1 ] ; then
    echo "$(get_ktlint_fail)"
else
   echo "$(get_ktlint_success)"
fi

if [ "$statusdeteKt" == 1 ] ; then
    echo "$(get_detekt_fail)"  
else
   echo "$(get_detekt_success)"
fi

if [[ "$status" == 0 ]] && [[ "$statusdeteKt" == 0 ]] && [[ "$statusLint" == 0 ]]; then
  exit 0
else
  exit 1
fi

